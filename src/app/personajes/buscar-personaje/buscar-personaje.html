<p-toast />
<div class="barraBusqueda">
  <div class="acciones">
    <table>
      <tr>
        <td><button routerLink="/personajes">Lista Personajes</button></td>
        <td><button routerLink="/crearpersonaje">Crear Personaje</button></td>
      </tr>
    </table>
  </div>
</div>


<div class="tablaPersonajes">
  <p-table #dt1 [value]="personajes" [tableStyle]="{ 'min-width': '50rem' }" [rowHover]="true" [rows]="10"
    [rowsPerPageOptions]="[10, 25, 50]" [paginator]="true" [globalFilterFields]="['nombre']">
    <ng-template #caption>
      <input pInputText type="text" [value]="$any(dt1).filters['global']?.value"
          (input)="dt1.filterGlobal($event.target.value, 'contains')" placeholder="Buscar por nombre" />
    </ng-template>
    <ng-template #header>
      <tr>
        <th pSortableColumn="nombre">
          <div class="flex items-center gap-2">
            Nombre
            <p-sortIcon field="nombre" />
          </div>
        </th>
        <th pSortableColumn="raza">
          <div class="flex items-center gap-2">
            Raza
            <p-sortIcon field="raza" />
          </div>
        </th>
        <th pSortableColumn="fechaNacimiento">
          <div class="flex items-center gap-2">
            Fecha de nacimiento
            <p-sortIcon field="fechaNacimiento" />
          </div>
        </th>
        <th pSortableColumn="nivelCorrupcion">
          <div class="flex items-center gap-2">
            Corrupcion
            <p-sortIcon field="nivelCorrupcion" />
          </div>
        </th>
        <th>Acciones</th>
      </tr>
    </ng-template>
    <ng-template #body let-personaje>
      <tr>
        <td>{{ personaje.nombre }}</td>
        <td>{{ personaje.raza }}</td>
        <td>{{ personaje.fechaNacimiento }}</td>
        <td>{{ personaje.nivelCorrupcion }}</td>
        <td class="flex items-center gap-2 align-items-center">
          <p-button (click)="editar(personaje)">Editar</p-button>
          <app-popup-baja-fisica [config]="getParamsBajaFis(personaje.id)" [pid]="personaje.id"></app-popup-baja-fisica>
          <app-popup-baja-logica [config]="getParamsBajaLog(personaje.id)" [hidden]="personaje.fechaBaja != null"
            [pid]="personaje.id"></app-popup-baja-logica>
          <app-popup-reactivar [config]="getParamsReactiv(personaje.id)" [hidden]="personaje.fechaBaja == null"
            [pid]="personaje.id"></app-popup-reactivar>
        </td>
      </tr>
    </ng-template>
    <ng-template #emptymessage>
      <tr>
        <td colspan="5">No se encontraron personajes</td>
      </tr>
    </ng-template>
  </p-table>
</div>